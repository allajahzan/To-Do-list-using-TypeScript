<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To Do List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="/style.css">
</head>

<body>

    <section id="add_list_section" class="container">
        <div class="add_list_div">
            <h3>To Do List</h3>
            <img src="/image.jpg" alt="">
            <form id="add_form" action="" onsubmit="addTasks(event)">
                <input id="title" required type="text">
                <input type="submit" value="Add">
            </form>
        </div>
    </section>


    <section class="container" id="lists">
        <div id="lists_of_tasks" class="list_div">
            <% locals.tasks.forEach((ele)=> { %>
                <div
                    style="display: flex; justify-content: space-between; margin-bottom: 10px; background-color: rgb(231, 231, 231); padding: 5px; border-radius: 10px;">
                    <input id="id<%= ele.id %>" type="hidden"  value="<%=  ele.id %>" >
                    <div id="tasks_div_<%= ele.id %>" style="display:flex; width: 230px; overflow: hidden; text-overflow: ellipsis;">
                        <% if(ele.status === 'done'){ %>
                            <button onclick="done('<%= ele.id %>')" class="done_btn" style="position: relative; top: 1px;"><span class="material-symbols-outlined">
                                check_circle
                            </span></button>
                            <p class="title" style="position: relative; top: 8px; text-decoration: line-through;">
                                <%= ele.title %>
                            </p>
                         <% } else {%>
                            <button onclick="done('<%= ele.id %>')" class="done_btn" style="position: relative; top: 1px;"><span class="material-symbols-outlined">
                                radio_button_unchecked
                            </span></button>
                            <p class="title" style="position: relative; top: 8px;">
                                <%= ele.title %>
                            </p>
                          <% } %>  
                        
                    </div>
                    <div id="edit_form_<%= ele.id %>" style="display: none;">
                        <% if(ele.status === 'done') {%>
                            <button class="done_btn" style="position: relative; top: 1px;"><span class="material-symbols-outlined">
                                check_circle
                             </span></button>
                        <% }else{ %>
                            <button class="done_btn" style="position: relative; top: 1px;"><span class="material-symbols-outlined">
                                radio_button_unchecked
                             </span></button>
                        <% } %>    
                        <form style="padding: 0px;" action="" onsubmit="saveTask(event,'<%= ele.id %>')">
                            <input id="id<%= ele.id %>" type="hidden"  value="<%= ele.id %>" >
                            <input style="padding-left: 10px; background-color: white;" id="edit_input_<%= ele.id %>" required type="text">
                            <button style="width: 9%;" ><span style="color: green;" class="material-symbols-outlined">
                                Save
                            </span></button>
                        </form>
                    </div>
                    <div id="buttons_<%= ele.id %>" style="display: flex; justify-content: space-between;">
                        <button onclick="editTask('<%= ele.title %>','<%= ele.id %>')" ><span class="material-symbols-outlined">
                                edit
                            </span></button>
                        <button onclick="deleteTask('<%= ele.id %>')"><span style="color: black;" class="material-symbols-outlined">
                                delete
                            </span></button>
                    </div>
                </div>
                <% }) %>
        </div>
    </section>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="/index.js"></script>
</body>

</html>